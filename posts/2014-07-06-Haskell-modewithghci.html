<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Jaiyalas' Note - Haskell-mode with ghci</title>
    <!--
    <link rel="stylesheet" type="text/css"
      href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/css/default.css" />
    -->
    <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css" />
    <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
    <link rel="stylesheet" type="text/css" href="../css/blog.css" />
    <link rel="stylesheet" type="text/css" href="../css/side-menu.css" />
    
  </head>
  <body>

    <div id="layout">
      <!-- Menu toggle -->
      <a href="#menu" id="menuLink" class="menu-link">
	<!-- Hamburger icon -->
	<span></span>
      </a>
      <div id="menu">
        <div class="pure-menu">
          <a class="pure-menu-heading" href="#">Y.Y.-C.</a>
          <ul class="pure-menu-list">
	    <li class="pure-menu-item"><a href="../index.html" class="pure-menu-link">Home</a></li>
            <li class="pure-menu-item"><a href="../tags.html" class="pure-menu-link">Tags</a></li>
            <li class="pure-menu-item"><a href="../archive.html" class="pure-menu-link">Archive</a></li>
            <li class="pure-menu-item"><a href="../about.html" class="pure-menu-link">About</a></li>
          </ul>
        </div>
      </div> <!-- end menu -->
      <div id="main">
	<div class="content">
	  <div class="content">
  <!-- A wrapper for all the blog posts -->
  <div class="posts">
    <h1 class="content-subhead">Pinned Post</h1>
    <!-- A single blog post -->
    <section class="post">
      <header class="post-header">
	<h2 class="post-title">Haskell-mode with ghci</h2>
	<p class="post-meta">
	  
	  By <a href="#" class="post-author">Yun-Yan Chi</a>
	  
	  under
	  <a class="post-category post-category-design" href="#">CSS</a>
	  <a class="post-category post-category-pure" href="#">Pure</a>
	</p>
	<p>
	  <small>Posted on July  6, 2014<a href="../posts/2014-07-06-Haskell-modewithghci.html"><i class="fa fa-link fa-lg fa-fw"></i></a></small>
	</p>
      </header>
      <div class="post-description">
	<p><p>自從改用 Emacs for mac os x 之後，原本一些 aquamacs 先包好的東西現在都沒有可以用爽爽。 其中最明顯的大概是 unicode 的問題，<a href="https://github.com/jaiyalas/eatoolbox/tree/master/config" title="https://github.com/jaiyalas/eatoolbox/tree/master/config">這邊</a>可以找到我之前弄好的設定，不過細節等未來有機會再說。這邊要提的是一度讓我頭痛不已的另一個問題：haskell-mode。</p>
<p><a href="https://github.com/haskell/haskell-mode" title="https://github.com/haskell/haskell-mode">haskell-mode</a> 的 source code 放在 github 上，有需要直接去下載就可以。安裝方法基本上就是直接找個地方丟，然後進去執行一下</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">&gt;</span> <span class="kw">make</span> haskell-mode-autoloads.el</code></pre>
<p>接著再去 ~/.emacs 裡面加上 load-path 和喜歡的 hook等等。我自己只加上了下面這五行：</p>
<pre><code>(add-to-list 'load-path &quot;~/.emacs.d/modes/haskell-mode/&quot;)
(require 'haskell-mode-autoloads)
(add-to-list 'Info-default-directory-list &quot;~/.emacs.d/modes/haskell-mode/&quot;)
(add-hook 'haskell-mode-hook 'turn-on-haskell-doc-mode)
(add-hook 'haskell-mode-hook 'turn-on-haskell-indent)</code></pre>
<p>之後隨便打開一個 .hs 檔案然後 C-c C-l 看看有沒有正常運作就可以了。</p>
<div class="figure">
<img src="../img/haskell-mode.png" />

</div>
<h3 id="找不到-hugs">找不到 hugs ?!</h3>
<p>之所以這個看起來安裝過程並不複雜的東西會可以困擾我好一陣子，是因為我的 haskell-mode 在裝好以後就一直想要去跑 hugs，但是我根本就沒裝過 hugs 囧mmm。 這個問題的原因是：haskell-mode 會去判斷系統的 haskell interpreter 是哪套然後直接生對應的參數出來。但是那個 inf-haskell.el 不管怎樣就是認為我的電腦裡面是 hugs = =</p>
<p>總之，最後我還是懶得改 haskell-mode 的 source code，所以就直接調 .emacs 。這裡提供兩種稍微粗暴的作法：</p>
<p><strong>[方法一]</strong> 就是直接從選單裡面去打開 Customize 這個頁面，然後點進 Inferior Haskell 這個子頁面並且修改 Haskell Program Name 這個變數到你自己的 ghci 路徑去。</p>
<p><strong>[方法二]</strong> 直接打開 .emacs 並且暴力要求先讀入 haskell-mode 然後直接修改變數值；也就是在上面五行之後再加上下面兩行：</p>
<pre><code>(autoload 'haskell-mode &quot;haskell-mode&quot; &quot;...&quot; t)
(setq haskell-program-name &quot;/usr/loacl/bin/ghci&quot;)</code></pre>
<p>這樣原則上就可以用了，不過其實這真的是個爛方法，我應該研究一下怎麼樣把變數設定做成一個 hook。但是這就要等我超級有空再說了 XD</p></p>
	<p>[Tags: <a href="../tags/emacs.html">emacs</a>, <a href="../tags/editor.html">editor</a>, <a href="../tags/haskell.html">haskell</a>]</p>
      </div>
    </section>
  </div> <!-- end posts -->
            




	  <div class="footer">
	    Powered by <a href="http://jaspervdj.be/hakyll">Hakyll</a>
	  </div> <!-- end footer-->
	</div> <!-- end content -->
      </div> <!-- end main -->
    </div> <!-- end layout -->
    
    <script src="../resources/ui.js"></script>
  </body>
</html>
